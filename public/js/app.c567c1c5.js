(function(e){function t(t){for(var n,s,c=t[0],i=t[1],u=t[2],l=0,d=[];l<c.length;l++)s=c[l],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&d.push(o[s][0]),o[s]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);f&&f(t);while(d.length)d.shift()();return a.push.apply(a,u||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,s=1;s<r.length;s++){var i=r[s];0!==o[i]&&(n=!1)}n&&(a.splice(t--,1),e=c(c.s=r[0]))}return e}var n={},o={app:0},a=[];function s(e){return c.p+"js/"+({Signup:"Signup",about:"about"}[e]||e)+"."+{Signup:"41b65673",about:"f9a74428"}[e]+".js"}function c(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.e=function(e){var t=[],r=o[e];if(0!==r)if(r)t.push(r[2]);else{var n=new Promise((function(t,n){r=o[e]=[t,n]}));t.push(r[2]=n);var a,i=document.createElement("script");i.charset="utf-8",i.timeout=120,c.nc&&i.setAttribute("nonce",c.nc),i.src=s(e);var u=new Error;a=function(t){i.onerror=i.onload=null,clearTimeout(l);var r=o[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+n+": "+a+")",u.name="ChunkLoadError",u.type=n,u.request=a,r[1](u)}o[e]=void 0}};var l=setTimeout((function(){a({type:"timeout",target:i})}),12e4);i.onerror=i.onload=a,document.head.appendChild(i)}return Promise.all(t)},c.m=e,c.c=n,c.d=function(e,t,r){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(r,n,function(t){return e[t]}.bind(null,n));return r},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var f=u;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},1:function(e,t){},10:function(e,t){},11:function(e,t){},12:function(e,t){},13:function(e,t){},1360:function(e,t,r){},14:function(e,t){},"1e11":function(e,t,r){},2:function(e,t){},3:function(e,t){},4:function(e,t){},5:function(e,t){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("7a23"),o={id:"nav"},a={key:0,class:"position-absolute btn btn-danger messages"},s={key:1,class:"position-absolute btn btn-success messages"},c={class:"navbar navbar-expand-lg navbar-dark bg-dark mb-3"},i={class:"container-fluid"},u=Object(n["h"])("DBMS"),l=Object(n["f"])("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[Object(n["f"])("span",{class:"navbar-toggler-icon"})],-1),f={class:"collapse navbar-collapse",id:"navbarSupportedContent"},d={class:"navbar-nav mb-2 mb-lg-0 ms-lg-auto"},b={class:"nav-item"},p=Object(n["h"])("Home"),m={key:0,class:"nav-item"},g=Object(n["h"])("Login"),j={key:1,class:"nav-item"},O=Object(n["h"])("Signup"),h=Object(n["f"])("span",{class:"btn btn-danger nav-link fw-bolder"},[Object(n["h"])("Log Out "),Object(n["f"])("i",{class:"fas fa-sign-out-alt"})],-1),v=[h];function w(e,t,r,h,w,y){var I=Object(n["v"])("router-link"),x=Object(n["v"])("router-view");return Object(n["r"])(),Object(n["e"])("div",null,[Object(n["f"])("div",o,[y.messages.error?(Object(n["r"])(),Object(n["e"])("div",a,Object(n["x"])(y.messages.error),1)):Object(n["d"])("",!0),y.messages.success?(Object(n["r"])(),Object(n["e"])("div",s,Object(n["x"])(y.messages.success),1)):Object(n["d"])("",!0),Object(n["f"])("nav",c,[Object(n["f"])("div",i,[Object(n["i"])(I,{class:"navbar-brand",to:{name:"Home"}},{default:Object(n["B"])((function(){return[u]})),_:1}),l,Object(n["f"])("div",f,[Object(n["f"])("ul",d,[Object(n["f"])("li",b,[y.userId.length?(Object(n["r"])(),Object(n["c"])(I,{key:0,to:"/",class:"nav-link"},{default:Object(n["B"])((function(){return[p]})),_:1})):Object(n["d"])("",!0)]),y.userId.length?Object(n["d"])("",!0):(Object(n["r"])(),Object(n["e"])("li",m,[Object(n["i"])(I,{to:{name:"Login"},class:"nav-link"},{default:Object(n["B"])((function(){return[g]})),_:1})])),y.userId.length?(Object(n["r"])(),Object(n["e"])("li",{key:2,class:"nav-item",onClick:t[0]||(t[0]=function(){return y.logoutUser&&y.logoutUser.apply(y,arguments)})},v)):(Object(n["r"])(),Object(n["e"])("li",j,[Object(n["i"])(I,{to:{name:"Signup"},class:"nav-link"},{default:Object(n["B"])((function(){return[O]})),_:1})]))])])])])]),Object(n["i"])(x)])}var y=r("1da1"),I=(r("96cf"),{name:"App",computed:{messages:function(){return this.$store.getters.messages},userId:function(){return this.$store.getters.userId}},methods:{logoutUser:function(){var e=this;return Object(y["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("logoutUser");case 2:e.$router.push({name:"Login"});case 3:case"end":return t.stop()}}),t)})))()}}});r("85f0");I.render=w;var x=I,S=r("9483");Object(S["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});r("d3b7"),r("3ca3"),r("ddb0");var U=r("6c02"),k=(r("b0c0"),{class:"home"}),C={class:"container bg-body"},P={class:"border box mx-auto custom-rounded overflow-hidden mt-5"},M={class:"bg-dark text-white top-rounded p-2 m-0 d-flex flex-row justify-content-between align-items-center"},E=Object(n["f"])("span",{class:"fs-3 fw-bold"}," Student Profile ",-1),N=Object(n["f"])("span",null,[Object(n["f"])("i",{class:"fas fa-user-edit me-2 fs-5",style:{cursor:"pointer"},"data-bs-toggle":"modal","data-bs-target":"#profileModal"})],-1),R={class:"modal fade",id:"profileModal",tabindex:"-1","aria-labelledby":"profileModalLabel","aria-hidden":"true"},T={class:"modal-dialog"},Y={class:"modal-content text-dark"},L=Object(n["f"])("div",{class:"modal-header"},[Object(n["f"])("h5",{class:"modal-title",id:"profileModalLabel"}," Edit your profile "),Object(n["f"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),_={class:"modal-body"},A={disabled:""},z={class:"mb-3"},B=Object(n["f"])("label",{for:"userEmail",class:"form-label"},"Email address",-1),D=Object(n["f"])("div",{id:"emailHelp",class:"form-text"}," We'll never share your email with anyone else. ",-1),H={class:"mb-3"},V=Object(n["f"])("label",{for:"userName",class:"form-label"},"Name",-1),$={class:"mb-3"},J=Object(n["f"])("label",{for:"registrationNumber",class:"form-label"},"Registration Number",-1),q={class:"mb-3"},F=Object(n["f"])("label",{for:"academicYear",class:"form-label"},"Academic Year",-1),G={class:"mb-3"},W=Object(n["f"])("label",{for:"semester",class:"form-label"},"Semester",-1),K={class:"mb-3"},Q=Object(n["f"])("label",{for:"program",class:"form-label"},"Program",-1),X={class:"modal-footer"},Z=Object(n["f"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),ee={class:"table table-striped mb-0"},te=Object(n["f"])("tr",null,[Object(n["f"])("th",{scope:"row"},"Profile Photo"),Object(n["f"])("td",null,[Object(n["f"])("i",{class:"fas fa-user",style:{"font-size":"36px"}})])],-1),re=Object(n["f"])("th",{scope:"row"},"Name of Student",-1),ne=Object(n["f"])("th",{scope:"row"},"Registration Number",-1),oe=Object(n["f"])("th",{scope:"row"},"Email Id",-1),ae=Object(n["f"])("th",{scope:"row"},"Academic year",-1),se=Object(n["f"])("th",{scope:"row"},"Semester",-1),ce=Object(n["f"])("th",{scope:"row"},"Program",-1);function ie(e,t,r,o,a,s){return Object(n["r"])(),Object(n["e"])("div",k,[Object(n["f"])("div",C,[Object(n["f"])("div",P,[Object(n["f"])("div",M,[E,N,Object(n["f"])("div",R,[Object(n["f"])("div",T,[Object(n["f"])("div",Y,[L,Object(n["f"])("div",_,[Object(n["f"])("form",null,[Object(n["f"])("fieldset",A,[Object(n["f"])("div",z,[B,Object(n["C"])(Object(n["f"])("input",{type:"email",class:"form-control",id:"userEmail","aria-describedby":"userEmail","onUpdate:modelValue":t[0]||(t[0]=function(e){return s.profileInfo.email=e})},null,512),[[n["z"],s.profileInfo.email]]),D])]),Object(n["f"])("div",H,[V,Object(n["C"])(Object(n["f"])("input",{type:"text",class:"form-control",id:"userName","aria-describedby":"userName","onUpdate:modelValue":t[1]||(t[1]=function(e){return s.profileInfo.name=e})},null,512),[[n["z"],s.profileInfo.name]])]),Object(n["f"])("div",$,[J,Object(n["C"])(Object(n["f"])("input",{type:"number",class:"form-control",id:"registrationNumber","aria-describedby":"registrationNumber","onUpdate:modelValue":t[2]||(t[2]=function(e){return s.profileInfo.registrationNumber=e})},null,512),[[n["z"],s.profileInfo.registrationNumber]])]),Object(n["f"])("div",q,[F,Object(n["C"])(Object(n["f"])("input",{type:"text",class:"form-control",id:"academicYear","aria-describedby":"academicYear","onUpdate:modelValue":t[3]||(t[3]=function(e){return s.profileInfo.academicYear=e})},null,512),[[n["z"],s.profileInfo.academicYear]])]),Object(n["f"])("div",G,[W,Object(n["C"])(Object(n["f"])("input",{type:"number",class:"form-control",id:"semester","aria-describedby":"semester","onUpdate:modelValue":t[4]||(t[4]=function(e){return s.profileInfo.semester=e})},null,512),[[n["z"],s.profileInfo.semester]])]),Object(n["f"])("div",K,[Q,Object(n["C"])(Object(n["f"])("input",{type:"text",class:"form-control",id:"program","aria-describedby":"program","onUpdate:modelValue":t[5]||(t[5]=function(e){return s.profileInfo.program=e})},null,512),[[n["z"],s.profileInfo.program]])])])]),Object(n["f"])("div",X,[Z,Object(n["f"])("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:t[6]||(t[6]=function(e){return s.updateProfileInfo()})}," Save changes ")])])])])]),Object(n["f"])("table",ee,[Object(n["f"])("tbody",null,[te,Object(n["f"])("tr",null,[re,Object(n["f"])("td",null,Object(n["x"])(s.profileInfo.name),1)]),Object(n["f"])("tr",null,[ne,Object(n["f"])("td",null,Object(n["x"])(s.profileInfo.registrationNumber),1)]),Object(n["f"])("tr",null,[oe,Object(n["f"])("td",null,Object(n["x"])(s.profileInfo.email),1)]),Object(n["f"])("tr",null,[ae,Object(n["f"])("td",null,Object(n["x"])(s.profileInfo.academicYear),1)]),Object(n["f"])("tr",null,[se,Object(n["f"])("td",null,Object(n["x"])(s.profileInfo.semester),1)]),Object(n["f"])("tr",null,[ce,Object(n["f"])("td",null,Object(n["x"])(s.profileInfo.program),1)])])])])])])}var ue={name:"Home",components:{},computed:{profileInfo:function(){return this.$store.getters.profileInfo}},methods:{updateProfileInfo:function(){this.$store.dispatch("updateProfileInfo")}}};r("7a24");ue.render=ie;var le=ue,fe=r("5502"),de=r("d4ec"),be=r("ade3"),pe="/api/auth/",me="/api/user/profile/",ge=function e(){Object(de["a"])(this,e)};Object(be["a"])(ge,"createUser",function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(pe+"signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()}));case 3:return r=e.sent,e.abrupt("return",r);case 7:e.prev=7,e.t0=e["catch"](0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()),Object(be["a"])(ge,"loginUser",function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(pe+"login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()}));case 3:return r=e.sent,e.abrupt("return",r);case 7:e.prev=7,e.t0=e["catch"](0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()),Object(be["a"])(ge,"updateUserProfile",function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(me,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()}));case 3:return r=e.sent,e.abrupt("return",r);case 7:e.prev=7,e.t0=e["catch"](0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}());var je=ge,Oe=r("14b7"),he=259200,ve=function(e){return Oe.sign({user:e},"Secret Code",{expiresIn:he})},we=5e3,ye=Object(fe["a"])({state:{currentUserId:"",currentUserDbId:"",authentication:{email:"",password:""},messages:{success:"",error:""},profileInfo:{name:null,registrationNumber:null,email:null,academicYear:null,semester:null,program:null}},mutations:{updateEmail:function(e,t){e.authentication.email=t},updatePassword:function(e,t){e.authentication.password=t},updateSuccessMessage:function(e,t){e.messages.success=t,setTimeout((function(){e.messages.success=""}),we)},updateErrorMessage:function(e,t){e.messages.error=t,setTimeout((function(){e.messages.error=""}),we)},updateCurrentUserDbId:function(e,t){e.currentUserDbId=t},updateCurrentUserId:function(e,t){e.currentUserId=t},updateProfileInfo:function(e,t){e.profileInfo.name=t.name,e.profileInfo.registrationNumber=t.registrationNumber,e.profileInfo.email=t.email,e.profileInfo.academicYear=t.academicYear,e.profileInfo.semester=t.semester,e.profileInfo.program=t.program},resetStates:function(e){e.authentication.email="",e.authentication.password=""},logoutUser:function(e){localStorage.removeItem("jwt"),e.currentUserId=""}},actions:{createUser:function(e){return Object(y["a"])(regeneratorRuntime.mark((function t(){var r,n,o,a,s,c,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.state,n=e.commit,o={email:r.authentication.email,password:r.authentication.password},t.prev=2,t.next=5,je.createUser(o);case 5:if(a=t.sent,!a.id){t.next=17;break}return s={email:r.authentication.email},t.next=10,je.updateUserProfile(s);case 10:c=t.sent,n("updateProfileInfo",c),i=ve(a),localStorage.setItem("jwt",i),n("updateSuccessMessage","User Created"),n("updateCurrentUserDbId",a.id),n("updateCurrentUserId",a.id);case 17:a.errors&&(a.errors.email?(console.log(a.errors.email),n("updateErrorMessage",a.errors.email)):n("updateErrorMessage",a.errors.password)),t.next=23;break;case 20:t.prev=20,t.t0=t["catch"](2),n("updateErrorMessage",t.t0);case 23:case"end":return t.stop()}}),t,null,[[2,20]])})))()},loginUser:function(e){return Object(y["a"])(regeneratorRuntime.mark((function t(){var r,n,o,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.state,n=e.commit,o={email:r.authentication.email,password:r.authentication.password},t.prev=2,t.next=5,je.loginUser(o);case 5:a=t.sent,a.id&&(s=ve(a),localStorage.setItem("jwt",s),r.profileInfo.email=a.email,n("updateSuccessMessage","You are logged in"),n("updateCurrentUserDbId",a.id),n("updateCurrentUserId",a.id)),a.errors&&(a.errors.email?n("updateErrorMessage",a.errors.email):n("updateErrorMessage",a.errors.password)),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](2),n("updateErrorMessage",t.t0);case 13:case"end":return t.stop()}}),t,null,[[2,10]])})))()},logoutUser:function(e){e.commit("logoutUser")},loginUserFromGoogle:function(e,t){return Object(y["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:n=ve(t),localStorage.setItem("jwt",n),e.commit("updateSuccessMessage","You are logged in"),e.commit("updateCurrentUserId",t);case 4:case"end":return r.stop()}}),r)})))()},updateProfileInfo:function(e){return Object(y["a"])(regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.state,n=e.commit,t.next=3,je.updateUserProfile(r.profileInfo);case 3:o=t.sent,n("updateProfileInfo",o);case 5:case"end":return t.stop()}}),t)})))()}},modules:{},getters:{messages:function(e){return e.messages},userId:function(e){return e.currentUserId},profileInfo:function(e){return e.profileInfo}}}),Ie=r("14b7"),xe=[{path:"/",name:"Home",component:le,meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:function(){return r.e("about").then(r.bind(null,"a55b"))},meta:{checkUser:!0}},{path:"/signup",name:"Signup",component:function(){return r.e("Signup").then(r.bind(null,"34c3"))},meta:{checkUser:!0}},{path:"/:pathMatch(.*)*",name:"pageNotFound",component:function(){return r.e("Signup").then(r.bind(null,"9be1"))},beforeEnter:function(e,t,r){var n=localStorage.getItem("jwt");n?Ie.verify(n,"Secret Code",(function(e,t){e?(ye.commit("updateErrorMessage",e.message),r()):(ye.commit("updateCurrentUserId",t.id),r())})):r()}}],Se=Object(U["a"])({history:Object(U["b"])("/"),routes:xe}),Ue=function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={email:t.user.email},e.next=3,je.updateUserProfile(r);case 3:n=e.sent,ye.commit("updateProfileInfo",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Se.beforeEach((function(e,t,r){if(e.matched.some((function(e){return e.meta.requiresAuth}))){var n=localStorage.getItem("jwt");n?Ie.verify(n,"Secret Code",(function(e,t){e?(ye.commit("updateErrorMessage",e.message),r({name:"Login"})):(Ue(t),ye.commit("updateCurrentUserId",t.user.id),r())})):r({name:"Login"})}else if(e.matched.some((function(e){return e.meta.checkUser}))){var o=localStorage.getItem("jwt");o?Ie.verify(o,"Secret Code",(function(e,t){e?(ye.commit("updateErrorMessage",e.message),r()):(ye.commit("updateCurrentUserId",t.user.id),r({name:"Home"}))})):r()}else r()}));var ke=Se;Object(n["b"])(x).use(ye).use(ke).mount("#app")},6:function(e,t){},7:function(e,t){},"7a24":function(e,t,r){"use strict";r("1e11")},8:function(e,t){},"85f0":function(e,t,r){"use strict";r("1360")},9:function(e,t){}});
//# sourceMappingURL=app.c567c1c5.js.map